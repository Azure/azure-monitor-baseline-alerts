- name: Requests
  description: Gateway request metrics with multiple dimensions
  type: Metric
  verified: false
  visible: true
  tags:
  - auto-generated
  - agc-4921
  properties:
    metricName: Requests
    metricNamespace: Microsoft.ApiManagement/service
    severity: 3
    windowSize: PT5M
    evaluationFrequency: PT1M
    timeAggregation: Total
    operator: GreaterThan
    criterionType: StaticThresholdCriterion
    threshold: 5000.0
    autoMitigate: false
  references:
  - name: Monitoring Azure Application Gateway data reference
    url: https://learn.microsoft.com/azure/application-gateway/monitor-application-gateway-reference
  - name: ApiManagementGatewayLogs
    url: https://learn.microsoft.com/azure/azure-monitor/reference/tables/apimanagementgatewaylogs
- name: Capacity
  description: 'Utilization metric for ApiManagement service. Note: For skus other
    than Premium, ''Max'' aggregation will show the value as 0.'
  type: Metric
  verified: false
  visible: true
  tags:
  - auto-generated
  - agc-3486
  properties:
    metricName: Capacity
    metricNamespace: Microsoft.ApiManagement/service
    severity: 3
    windowSize: PT5M
    evaluationFrequency: PT1M
    timeAggregation: Average
    operator: GreaterThan
    criterionType: StaticThresholdCriterion
    threshold: 80.0
    autoMitigate: false
  references:
  - name: Monitoring Azure Application Gateway data reference
    url: https://learn.microsoft.com/azure/application-gateway/monitor-application-gateway-reference
  - name: ApiManagementGatewayLogs
    url: https://learn.microsoft.com/azure/azure-monitor/reference/tables/apimanagementgatewaylogs
- name: BackendDuration
  description: Duration of Backend Requests in milliseconds
  type: Metric
  verified: false
  visible: true
  tags:
  - auto-generated
  - agc-1746
  properties:
    metricName: BackendDuration
    metricNamespace: Microsoft.ApiManagement/service
    severity: 3
    windowSize: PT5M
    evaluationFrequency: PT1M
    timeAggregation: Average
    operator: GreaterThan
    criterionType: StaticThresholdCriterion
    threshold: 15000.0
    autoMitigate: false
  references:
  - name: Monitoring Azure Application Gateway data reference
    url: https://learn.microsoft.com/azure/application-gateway/monitor-application-gateway-reference
  - name: ApiManagementGatewayLogs
    url: https://learn.microsoft.com/azure/azure-monitor/reference/tables/apimanagementgatewaylogs
- name: Duration
  description: Overall Duration of Gateway Requests in milliseconds
  type: Metric
  verified: false
  visible: true
  tags:
  - auto-generated
  - agc-853
  properties:
    metricName: Duration
    metricNamespace: Microsoft.ApiManagement/service
    severity: 3
    windowSize: PT5M
    evaluationFrequency: PT5M
    timeAggregation: Average
    operator: GreaterThan
    criterionType: StaticThresholdCriterion
    threshold: 3000.0
    autoMitigate: false
  references:
  - name: Monitoring Azure Application Gateway data reference
    url: https://learn.microsoft.com/azure/application-gateway/monitor-application-gateway-reference
  - name: ApiManagementGatewayLogs
    url: https://learn.microsoft.com/azure/azure-monitor/reference/tables/apimanagementgatewaylogs
- name: FailedRequests
  description: Number of failures in gateway requests - Use multi-dimension request
    metric with GatewayResponseCodeCategory dimension instead
  type: Metric
  verified: false
  visible: true
  tags:
  - auto-generated
  - agc-730
  properties:
    metricName: FailedRequests
    metricNamespace: Microsoft.ApiManagement/service
    severity: 3
    windowSize: PT5M
    evaluationFrequency: PT1M
    timeAggregation: Total
    operator: GreaterThan
    criterionType: StaticThresholdCriterion
    threshold: 1.0
    autoMitigate: false
  references:
  - name: Monitoring Azure Application Gateway data reference
    url: https://learn.microsoft.com/azure/application-gateway/monitor-application-gateway-reference
  - name: ApiManagementGatewayLogs
    url: https://learn.microsoft.com/azure/azure-monitor/reference/tables/apimanagementgatewaylogs
- name: UnauthorizedRequests
  description: Number of unauthorized gateway requests - Use multi-dimension request
    metric with GatewayResponseCodeCategory dimension instead
  type: Metric
  verified: false
  visible: true
  tags:
  - auto-generated
  - agc-576
  properties:
    metricName: UnauthorizedRequests
    metricNamespace: Microsoft.ApiManagement/service
    severity: 3
    windowSize: PT5M
    evaluationFrequency: PT1M
    timeAggregation: Total
    operator: GreaterThan
    criterionType: StaticThresholdCriterion
    threshold: 1.0
    autoMitigate: false
  references:
  - name: Monitoring Azure Application Gateway data reference
    url: https://learn.microsoft.com/azure/application-gateway/monitor-application-gateway-reference
  - name: ApiManagementGatewayLogs
    url: https://learn.microsoft.com/azure/azure-monitor/reference/tables/apimanagementgatewaylogs
- name: TotalRequests
  description: Number of gateway requests - Use multi-dimension request metric with
    GatewayResponseCodeCategory dimension instead
  type: Metric
  verified: false
  visible: true
  tags:
  - auto-generated
  - agc-382
  properties:
    metricName: TotalRequests
    metricNamespace: Microsoft.ApiManagement/service
    severity: 3
    windowSize: PT1H
    evaluationFrequency: PT5M
    timeAggregation: Total
    operator: GreaterThan
    criterionType: StaticThresholdCriterion
    threshold: 0.0
